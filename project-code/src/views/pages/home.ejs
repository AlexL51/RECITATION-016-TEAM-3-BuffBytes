<%- include ('../partials/header') %> 
<%- include ('../partials/menu') %>
<%- include ('../partials/message') %>

<main>
    

    <div class = "container bg-light"> 
        <br>
        <flex>
            <h3>BuffHeard</h3>
            <form action="add_post" method="get">
                <input class="buff-heard-button btn btn-primary" type="submit" value="New Post" />
            </form>
        </flex>
        <br>
        <% topics.forEach(function(topic) { %>
            <div class="card row-hover pos-relative py-3 px-3 mb-3 border-warning border-top-0 border-right-0 border-bottom-0 rounded-1">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h5 class="text-black"><%= topic.subject %></h5>
                        <p class="text-sm">
                            <span class="op-6">Posted by</span>
                            <!--Need to add link to user page
                                and show username not id-->
                            <a class="text-black" href="#">
                                <%= topic.username %>
                            </a>
                        </p>
                        <!--This div is for the post body
                            I have to implement a max display length
                            and a '...' button to continue reading.-->
                        <div class="text-sm op-5"> 
                            <% if (topic.body.length > 97 ){ %>
                                <span style="display: inline"><%= topic.body.substring(0, 97) %></span>
                                <a href="#" style="display: inline">...</a>       
                            <% } else { %>
                                <a class="text-black mr-2"><%= topic.body %></a>
                            <% } %>
                        </div>
                        <div class="col-md-4">
                            <div class="row text-center op-7">
                                <div class="col px-1">
                                    <i class="ion-ios-chatboxes-outline icon-1x"></i> 
                                    <a class="d-block text-sm" href="/comments/<%=topic.post_id%>">47 replies</a> 
                                </div>
                            </div>
                        </div>
                    </div>         
                </div>
<<<<<<< HEAD
            </div>
            <br>
        <% }); %>

=======
                <br>
            <% }); %>
            <form action="add_post" method="get">
                <input type="submit" value="New Post" />
            </form>
        </div>
>>>>>>> 3477b6bc5dd09ae24c15d212cf032b99a27c4a10
    </div>
</main>
<%- include ('../partials/footer') %> 
